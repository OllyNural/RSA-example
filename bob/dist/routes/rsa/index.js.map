{"version":3,"sources":["../../../src/routes/rsa/index.js"],"names":["express","require","fs","path","jsonPath","join","__dirname","keyGen","router","Router","get","req","res","next","keys","readFile","err","data","console","log","sendStatus","keyList","JSON","parse","push","name","writeFile","stringify","send","d","n","module","exports"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;AACA,IAAME,OAAOF,QAAQ,MAAR,CAAb;AACA,IAAMG,WAAWD,KAAKE,IAAL,CAAUC,SAAV,EAAqB,IAArB,EAA2B,IAA3B,EAAiC,IAAjC,EAAuC,WAAvC,CAAjB;;eACmBL,QAAQ,uBAAR,C;IAAXM,M,YAAAA,M;;AAER,IAAMC,SAASR,QAAQS,MAAR,EAAf;;AAEAD,OAAOE,GAAP,CAAW,QAAX,EAAqB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACrC,QAAIC,OAAOP,QAAX;AACAL,OAAGa,QAAH,CAAYX,QAAZ,EAAsB,MAAtB,EAA8B,UAACY,GAAD,EAAMC,IAAN,EAAe;AACzC,YAAID,GAAJ,EAAQ;AACJE,oBAAQC,GAAR,CAAYH,GAAZ;AACA,mBAAOJ,IAAIQ,UAAJ,CAAe,GAAf,CAAP;AACH,SAHD,MAGO;AACH,gBAAIC,UAAUC,KAAKC,KAAL,CAAWN,IAAX,CAAd;AACAI,oBAAQG,IAAR,CAAa;AACTC,sBAAM,OADG;AAETX;AAFS,aAAb;AAIAI,oBAAQC,GAAR,CAAYL,IAAZ;AACAI,oBAAQC,GAAR,CAAYE,OAAZ;AACAnB,eAAGwB,SAAH,CAAatB,QAAb,EAAuBkB,KAAKK,SAAL,CAAeN,OAAf,CAAvB,EAAgD,UAACL,GAAD,EAAS;AACrDJ,oBAAIgB,IAAJ,CAAS,EAAEC,GAAGf,KAAKe,CAAV,EAAaC,GAAGhB,KAAKgB,CAArB,EAAT;AACH,aAFD;AAGH;AACJ,KAhBD;AAiBH,CAnBD;;AAqBAC,OAAOC,OAAP,GAAiBxB,MAAjB","file":"index.js","sourcesContent":["const express = require('express')\nconst fs = require('fs');\nconst path = require('path');\nconst jsonPath = path.join(__dirname, '..', '..', 'db', 'keys.json');\nconst { keyGen } = require('rsa-example-functions')\n\nconst router = express.Router()\n\nrouter.get('/setup', (req, res, next) => {\n    let keys = keyGen()\n    fs.readFile(jsonPath, 'utf8', (err, data) => {\n        if (err){\n            console.log(err);\n            return res.sendStatus(400);\n        } else {\n            let keyList = JSON.parse(data)\n            keyList.push({\n                name: 'alice',\n                keys\n            })\n            console.log(keys)\n            console.log(keyList)\n            fs.writeFile(jsonPath, JSON.stringify(keyList), (err) => {\n                res.send({ d: keys.d, n: keys.n })\n            })\n        }\n    })\n})\n\nmodule.exports = router\n"]}